const { transform } = require("babel-core");

const FIXTURE = `
  import test from './test/fixtures/defs.svg';
`;

const expected =
  'var test = \'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path d="M10 0c5.523 0 10 4.477 10 10s-4.477 10-10 10S0 15.523 0 10 4.477 0 10 0zm0 .5a9.5 9.5 0 100 19 9.5 9.5 0 000-19zM6.796 14.116a.66.66 0 01.338.252c.497.76.977 1.53 1.488 2.337-.587.301-1.15.598-1.724.874-.088.042-.234.014-.333-.029a8.028 8.028 0 01-2.623-1.834.546.546 0 01-.135-.392c.084-.634.197-1.263.31-1.943.933.253 1.809.485 2.68.735zm5.014-1.715c-.035.1-.2.22-.305.22-1.045.017-2.092.011-3.187.011-.344-1.058-.69-2.113-1.02-3.175-.023-.074.058-.225.134-.28.86-.619 1.728-1.224 2.604-1.84.89.629 1.735 1.217 2.565 1.827.097.07.176.284.142.393a78.303 78.303 0 01-.933 2.844zm-1.706-7.52c-.05.02-.12.006-.173-.014-.889-.344-1.775-.691-2.699-1.053.3-.582.568-1.13.865-1.662.058-.103.22-.184.349-.21a7.645 7.645 0 013.116 0c.128.028.284.117.348.223.313.526.6 1.066.92 1.647-.926.366-1.826.72-2.726 1.07zm-5.122 3.63a.454.454 0 01-.096.283c-.568.73-1.144 1.452-1.75 2.217-.512-.494-1.004-.962-1.483-1.444-.056-.056-.057-.19-.049-.284a7.833 7.833 0 01.939-3.01c.06-.108.164-.246.268-.266.64-.127 1.285-.223 1.985-.339.065.974.132 1.907.186 2.843zm8.273 5.605c.874-.246 1.75-.479 2.69-.733.12.669.243 1.31.336 1.954.015.102-.095.242-.181.333a8.381 8.381 0 01-2.577 1.84c-.108.051-.271.087-.369.042-.566-.263-1.121-.551-1.71-.845.521-.824 1.018-1.62 1.528-2.405a.52.52 0 01.283-.186zm1.858-6.494c.105-.626.11-1.269.164-1.954.676.114 1.291.21 1.902.329.096.018.199.132.25.228.53.982.865 2.028.97 3.142.01.111-.057.255-.134.344-.391.453-.798.892-1.25 1.393-.478-.596-.835-1.11-1.262-1.555-.532-.554-.772-1.15-.64-1.927z" id="test-path-1"/></defs><g id="test-Football" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="test-Colours/Brand/DarkBlue" transform="translate(2 2)"><mask id="test-mask-2" fill="#fff"><use xlink:href="#test-path-1"/></mask><use id="test-Mask" fill="#C67777" xlink:href="#test-path-1"/><g mask="url(#test-mask-2)" fill="#20242E" id="test-Rectangle"><path d="M0 0h20v20H0z"/></g></g></g></svg>\';';

describe("complex", () => {
  it("namespacing works with defs and masks", () => {
    const { code } = transform(FIXTURE, {
      plugins: ["./lib/index.js"],
    });

    expect(code).toBe(expected);
  });
});
